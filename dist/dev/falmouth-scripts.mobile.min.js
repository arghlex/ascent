FO.options={debug:!0,footer:{default:!0,custom:!0,items:[{text:"Accessibility",url:"https://www.falmouth.ac.uk/falmouth-online-accessibility-statement"},{text:"&copy; 2021 Falmouth University",url:"htps://www.falmouth.ac.uk"}]}},FO.utils=Object.assign(FO.utils,function(t){function i(e,t){for(var i in t)e.setAttribute(i,t[i])}function s(e,t){e=document.createElement(e);return i(e,t),e}function e(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,1):document.addEventListener("DOMContentLoaded",function(){e()})}var n={};function r(e){console.log("Mutation Observer | ","The DOM has changed",e),e.forEach(function(e){for(var t in console.log("Mutation Observer | ","mutation: ",e),n)Object.hasOwnProperty.call(n,t)&&(0,n[t])()})}function o(){console.log("Add mutation observer",n);var e=document.getElementById("content"),t=new MutationObserver(r);try{t.observe(e,{childList:!0,subtree:!0})}catch(e){console.log(e)}}return e(o),{setAttributes:i,buildElement:s,loadScript:function(e){e=s("script",{src:e,type:"text/javascript"}),document.getElementsByTagName("head")[0].appendChild(e)},docReady:e,log:function(){var e;t&&((e=Array.prototype.slice.call(arguments)).unshift("FO debug "+Date.now()),console.log.apply(console,e))},loadMutationObserver:o,setObservable:function(e,t){n[e]=t},getObservable:function(e){return e?n[e]:n}}}(FO.options.debug)),FO.transformation=function(e){var t,i;document.querySelectorAll("a.modules").forEach(function(e){var t=e.textContent.replace(/Modules/g,"Topics");e.textContent=t}),"/logout"===window.location.pathname&&(t=(i=document.querySelector(".ic-Login__body")).querySelector(".ic-Login__text"),i=i.querySelector(".ic-Login__actions"),(e=e.buildElement("a",{class:"btn btn-primary btn-block",href:"https://login.microsoftonline.com/common/wsfederation?wa=wsignout1.0"})).innerHTML="Log out via Microsoft",t.innerHTML="You have been logged out of Falmouth Online. <br><br>If you logged in using Microsoft, you will need to log out via Microsoft as well.",i.innerHTML="",i.appendChild(e))}(FO.utils),FO.footer=function(i){var e,s,t=document.querySelector("footer#footer");null!==t&&(e=FO.options.footer,s=t.querySelector("#footer-links"),e.default||(s.innerHTML=""),e.custom&&e.items.forEach(function(e){var t=void 0===e.url?i.buildElement("span"):i.buildElement("a",{href:e.url});t.innerHTML=e.text,s.appendChild(t)}))}(FO.utils),FO.editor=function(t){function i(e){window.tinymce?(t.log("tinymce available. Waiting."),window.tinymce.editors[0]?(t.log("editors available. Proceeding.",tinymce.editors[0]),e()):(t.log("editors NOT available. Waiting."),window.setTimeout(i.bind(this,e),1e3))):(t.log("NOT available. Waiting."),window.setTimeout(i.bind(this,e),1e3))}if(null!==document.querySelector("body.edit"))try{var e=Array.from(document.querySelectorAll("link")).find(function(e){return e.href.includes("falmouth-styles")});i(function(){tinymce.editors[0].dom.loadCSS(e.href)})}catch(e){t.log(e)}}(FO.utils),FO.analytics=function(n){var e,t,i,s;function r(t){var e=Date.now(),i=localStorage.getItem(t+"_expiresIn");if(null==i&&(i=0),i<e)return function(t){try{localStorage.removeItem(t),localStorage.removeItem(t+"_expiresIn")}catch(e){return n.log("removeStorage: Error removing key ["+t+"] from localStorage: "+JSON.stringify(e))}}(t),null;try{return localStorage.getItem(t)}catch(e){return n.log("getStorage: Error reading key ["+t+"] from localStorage: "+JSON.stringify(e)),null}}e=window,s=document,t="custom_ga",e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=+new Date,i=s.createElement("script"),s=s.getElementsByTagName("script")[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",s.parentNode.insertBefore(i,s);async function o(e){var t=await(await fetch("/api/v1/users/self/courses?per_page=100")).text(),t=JSON.parse(t),t=JSON.stringify(t);return function(t,e,i){i=null==i?86400:Math.abs(i);var s=Date.now()+1e3*i;try{localStorage.setItem(t,e),localStorage.setItem(t+"_expiresIn",s)}catch(e){return n.log("setStorage: Error setting key ["+t+"] in localStorage: "+JSON.stringify(e))}}("ga_enrollments",t,null),a(e,t)}function a(e,t){if(null!=t)for(var i=JSON.parse(t),s=0;s<i.length;s++)if(i[s].id==e)return i[s];return null}function l(e){custom_ga("set","dimension4",e.id),custom_ga("set","dimension5",e.name),custom_ga("set","dimension6",e.account_id),custom_ga("set","dimension7",e.enrollment_term_id),custom_ga("set","dimension8",e.enrollments[0].type),custom_ga("send","pageview")}try{!function(t){var e,i;if(custom_ga("create",t,"auto"),e=ENV.current_user_id,t=ENV.current_user_roles,custom_ga("set","userId",e),custom_ga("set","dimension1",e),custom_ga("set","dimension3",t),i=window.location.pathname.match(/\/courses\/(\d+)/)){i=i[1],t=0;try{var s=r("ga_enrollments");null!=s?null===(s=a(i,s))?o(i).then(function(e){null===e?(custom_ga("set","dimension4",i),custom_ga("send","pageview")):l(e)}):l(s):o(i).then(function(e){null===e?(custom_ga("set","dimension4",i),custom_ga("send","pageview")):l(e)})}catch(e){++t}}else custom_ga("send","pageview")}("UA-181956013-1")}catch(e){n.log(error)}}(FO.utils),FO.accordion=function(g){function e(){document.querySelectorAll(".ta-group").forEach(function(e,t){var i=e.getAttribute("data-tabs"),s="true"===e.getAttribute("data-start-collapsed"),d="ta-"+t,u=g.buildElement("div",{class:"accordion-tabs js-tabs",id:d}),h=g.buildElement("ul",{role:"tablist",class:"tabs-tab-list"}),t=e.querySelectorAll(".ta-item");"true"===i?u.setAttribute("data-tabs-allowed","true"):u.setAttribute("data-tabs-allowed","false"),s&&u.setAttribute("data-start-collapsed",!0),t.forEach(function(e,t){var i,s,n,r,o,a,l=e.querySelector(".ta-heading").innerHTML,c=e.querySelector(".ta-content").innerHTML;a=l,o={href:"#"+(o=d)+"-section"+(r=t),role:"tab",id:o+"-tab"+r,"aria-controls":o+"-section"+r,class:"tabs-trigger js-tabs-trigger"},0===r&&(o["aria-selected"]="true",o.tabindex="0"),(o=g.buildElement("a",o)).innerHTML=a,(a=g.buildElement("li",{role:"presentation"})).appendChild(o),i=a,s=l,n=c,e=d,r=t,o=document.createElement("section"),a=document.createElement("div"),l=document.createElement("div"),t={id:c=e+"-section"+r,role:"tabpanel","aria-labelledby":e+"-tab"+r,class:"tabs-panel js-tabs-panel"},e={class:"accordion-trigger js-accordion-trigger","aria-controls":c,"aria-expanded":"false",tabindex:"0"},c={class:"content","aria-hidden":"true"},0===r&&(t.tabindex="0",e["aria-expanded"]="true",c["aria-hidden"]="false"),g.setAttributes(o,t),g.setAttributes(a,e),g.setAttributes(l,c),a.innerHTML=s,l.innerHTML=n,o.appendChild(a),o.appendChild(l),o=o,h.appendChild(i),u.appendChild(o)}),u.insertBefore(h,u.querySelector("section")),g.log("convertHtml",u),e.parentNode.insertBefore(u,e),e.remove()})}var t=function(){"use strict";function t(e,t){e&&(this.el=e,this.tabTriggers=this.el.getElementsByClassName("js-tabs-trigger"),this.tabPanels=this.el.getElementsByClassName("js-tabs-panel"),this.accordionTriggers=this.el.getElementsByClassName("js-accordion-trigger"),this.options=this._extend({breakpoint:640,tabsAllowed:!0,selectedTab:0,startCollapsed:!1},t),"true"==e.getAttribute("data-tabs-allowed")?this.options.tabsAllowed=!0:"false"==e.getAttribute("data-tabs-allowed")&&(this.options.tabsAllowed=!1),e.getAttribute("data-breakpoint")&&(this.options.breakpoint=parseInt(e.getAttribute("data-breakpoint"))),e.getAttribute("data-selected-tab")&&(this.options.selectedTab=parseInt(e.getAttribute("data-selected-tab"))),"true"==e.getAttribute("data-start-collapsed")?this.options.startCollapsed=!0:"false"==e.getAttribute("data-start-collapsed")&&(this.options.startCollapsed=!1),0!==this.tabTriggers.length&&this.tabTriggers.length===this.tabPanels.length&&this._init())}t.prototype._init=function(){var e=this;this.tabTriggersLength=this.tabTriggers.length,this.accordionTriggersLength=this.accordionTriggers.length,this.selectedTab=0,this.prevSelectedTab=null,this.clickListener=this._clickEvent.bind(this),this.keydownListener=this._keydownEvent.bind(this),this.keys={prev:37,next:39,space:32,enter:13},window.innerWidth>=this.options.breakpoint&&this.options.tabsAllowed?this.isAccordion=!1:this.isAccordion=!0;for(var t=0;t<this.tabTriggersLength;t++)this.tabTriggers[t].index=t,this.tabTriggers[t].addEventListener("click",this.clickListener,!1),this.tabTriggers[t].addEventListener("keydown",this.keydownListener,!1),this.tabTriggers[t].classList.contains("is-selected")&&(this.selectedTab=t),this._hide(t);for(t=0;t<this.accordionTriggersLength;t++)this.accordionTriggers[t].index=t,this.accordionTriggers[t].addEventListener("click",this.clickListener,!1),this.accordionTriggers[t].addEventListener("keydown",this.keydownListener,!1),this.accordionTriggers[t].classList.contains("is-selected")&&(this.selectedTab=t);isNaN(this.options.selectedTab)||(this.selectedTab=this.options.selectedTab<this.tabTriggersLength?this.options.selectedTab:this.tabTriggersLength-1),this.el.classList.add("is-initialized"),this.options.tabsAllowed&&this.el.classList.add("tabs-allowed"),this.options.startCollapsed&&this.isAccordion||this.selectTab(this.selectedTab,!1);var i=this._debounce(function(){window.innerWidth>=e.options.breakpoint&&e.options.tabsAllowed?(e.isAccordion=!1,e.options.tabsAllowed&&e.el.classList.add("tabs-allowed"),e.selectTab(e.selectedTab)):(e.isAccordion=!0,e.el.classList.remove("tabs-allowed"),e.options.startCollapsed||e.selectTab(e.selectedTab))},50);window.addEventListener("resize",i)},t.prototype._clickEvent=function(e){e.preventDefault();var t=this._getClosest(e.target,".js-tabs-trigger"),i=0;null==t?(t=this._getClosest(e.target,".js-accordion-trigger"),i=this._getClosest(t,".js-tabs-panel"),this.isAccordion=!0):this.isAccordion=!1;i=(null!=e.currentTarget.index?e.currentTarget:i).index;i===this.selectedTab&&!this.isAccordion||this.selectTab(i,!0)},t.prototype._keydownEvent=function(e){var t;if(e.keyCode===this.keys.prev||e.keyCode===this.keys.next||e.keyCode===this.keys.space||e.keyCode===this.keys.enter){if(e.preventDefault(),e.keyCode===this.keys.prev&&0<e.currentTarget.index&&!this.isAccordion)t=e.currentTarget.index-1;else if(e.keyCode===this.keys.next&&e.currentTarget.index<this.tabTriggersLength-1&&!this.isAccordion)t=e.currentTarget.index+1;else{if(e.keyCode!==this.keys.space&&e.keyCode!==this.keys.enter)return;t=e.currentTarget.index}this.selectTab(t,!0)}},t.prototype._show=function(e,t){this.tabPanels[e].removeAttribute("tabindex"),this.tabTriggers[e].removeAttribute("tabindex"),this.tabTriggers[e].classList.add("is-selected"),this.tabTriggers[e].setAttribute("aria-selected",!0),this.accordionTriggers[e].setAttribute("aria-expanded",!0);var i=this.tabPanels[e].getElementsByClassName("content")[0];i.setAttribute("aria-hidden",!1),i.classList.remove("is-hidden"),i.classList.add("is-open"),this.tabPanels[e].classList.remove("is-hidden"),this.tabPanels[e].classList.add("is-open"),t&&this.tabTriggers[e].focus()},t.prototype._hide=function(e){this.tabTriggers[e].classList.remove("is-selected"),this.tabTriggers[e].setAttribute("aria-selected",!1),this.tabTriggers[e].setAttribute("tabindex",-1),this.accordionTriggers[e].setAttribute("aria-expanded",!1);var t=this.tabPanels[e].getElementsByClassName("content")[0];t.setAttribute("aria-hidden",!0),t.classList.remove("is-open"),t.classList.add("is-hidden"),this.tabPanels[e].classList.remove("is-open"),this.tabPanels[e].classList.add("is-hidden"),this.tabPanels[e].setAttribute("tabindex",-1)},t.prototype.selectTab=function(e,t){if(null===e){if(this.isAccordion)return;e=0}if(!this.tabPanels[e].classList.contains("is-hidden")&&t)return e===this.selectedTab?this.selectedTab=null:(this.selectedTab=null,this.prevSelectedTab=e),void this._hide(e);if(this.isAccordion)this.prevSelectedTab=this.selectedTab,this.selectedTab=e;else{if(null!==this.prevSelectedTab&&this.isAccordion)this._hide(this.selectedTab);else for(var i=0;i<this.tabTriggersLength;i++)i!==e&&this._hide(i);this.prevSelectedTab=this.selectedTab,this.selectedTab=e}this._show(this.selectedTab,t)},t.prototype.destroy=function(){for(var e=0;e<this.tabTriggersLength;e++)this.tabTriggers[e].classList.remove("is-selected"),this.tabTriggers[e].removeAttribute("aria-selected"),this.tabTriggers[e].removeAttribute("tabindex"),this.tabPanels[e].classList.remove("is-hidden"),this.tabPanels[e].removeAttribute("aria-hidden"),this.tabPanels[e].removeAttribute("tabindex"),this.tabTriggers[e].removeEventListener("click",this.clickListener,!1),this.tabTriggers[e].removeEventListener("keydown",this.keydownListener,!1),delete this.tabTriggers[e].index;this.el.classList.remove("is-initialized")},t.prototype._getClosest=function(e,t){for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),i=t.length;0<=--i&&t.item(i)!==this;);return-1<i});e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null},t.prototype._extend=function(){var i={},s=!1,e=0,t=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(s=arguments[0],e++);for(;e<t;e++)!function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(s&&"[object Object]"===Object.prototype.toString.call(e[t])?i[t]=extend(!0,i[t],e[t]):i[t]=e[t])}(arguments[e]);return i},t.prototype._debounce=function(s,n,r){var o;return function(){var e=this,t=arguments,i=r&&!o;clearTimeout(o),o=setTimeout(function(){o=null,r||s.apply(e,t)},n),i&&s.apply(e,t)}};var e=Array.prototype.slice;function i(){e.call(document.querySelectorAll(".js-tabs")).forEach(function(e){new t(e)})}return"undefined"!=typeof Document&&("loading"!==document.readyState?i():document.addEventListener("DOMContentLoaded",i)),"undefined"!=typeof self&&(self.AccordionTabs=t),"object"==typeof module&&module.exports&&(module.exports=t),t};function i(){e(),t()}return i(),{convert:e,accTabs:t,init:function(){document.querySelectorAll(".ta-group").length&&i()}}}(FO.utils),FO.images=function(s){function t(){var e,t=document.querySelector("h1.page-title, h1.discussion-title"),i=document.querySelector(".hero");try{null!==t&&null!==i&&(e='background-image: url("'+i.querySelector("img").getAttribute("src")+'")',i.setAttribute("style",e),i.append(t),i.setAttribute("data-build",!0))}catch(e){s.log(e)}}return s.docReady(t),s.setObservable("hero",function(){var e=document.querySelector(".hero");null!==e&&"true"!==e.getAttribute("data-build")&&t()}),{hero:t}}(FO.utils,window.jQuery),FO.weeklinks=function(s){function e(){var e=s(document.body).find(".week-links");e.length&&(e.each(function(e,t){s(t).data("build")||(s(t).find("li").wrapInner(function(){var e=s(this),t=e.find(".fo-card-title"),i=t.find("a"),e=e.find(".fo-card-title a").attr("href");return t.html(i.html()),'<a href="'+e+'"></a>'}),s(t).data("build",!0))}),console.log("finished expandLinks"))}return e(),{init:e}}((FO.utils,window.jQuery));